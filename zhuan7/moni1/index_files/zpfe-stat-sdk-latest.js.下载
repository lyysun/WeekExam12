/*!
* @zpfe/stat-sdk@1.0.0-beta.10
* (c) 2018-2018 zhaopin.com
*/
var _zpStat=function(){"use strict";var e=!1;var o={getCookies:function(){var r={};try{for(var t=document.cookie?document.cookie.split("; "):[],e=0;e<t.length;e++){var o=t[e].split("=");r[o[0]]=decodeURIComponent(o[1])}return r}catch(t){return console.error("获取 cookies 失败",t),window.zpStat&&window.zpStat.error&&window.zpStat.error(t,"获取 cookies 失败"),r}},getCurrentUrlPath:function(t){var r="";return"string"==typeof t&&(r=t.replace(/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,"$3/$5")),r}};var t,r,n=(!(t=window.zpStatConfig||{}).page&&(t.page={}),function(t){t.x_zp_page_request_id=window.zpPageRequestId,t.current_url=document.location.href,t.referrer=document.referrer,t.appid||console.error("请配置zpStatConfig.page.appid");var r=o.getCookies();r.at&&r.rt&&(t.passport_at=r.at,t.passport_rt=r.rt)}((r=t).page),r),a="sa";function i(t){try{var r=t.getAttribute("zp-stat-id");if(!r)return{};for(var e={stat_id:r},o=t.attributes,n=0;n<o.length;n++){var a=o[n].name;"zp-stat-id"!==a&&(0==a.indexOf("zp-stat-")&&(e[a=a.substr(8).replace(/-/g,"_")]=o[n].value))}return e}catch(t){return window.zpStat&&window.zpStat.error&&window.zpStat.error(t.message,"提取自定义上报信息失败"),{}}}(function(t){try{var r=t.sdk_url,e=t.name,o=window,n=document,a="script",i=null,s=null;o.sensorsDataAnalytic201505=e,o[e]=o[e]||function(t){return function(){(o[e]._q=o[e]._q||[]).push([t,arguments])}};for(var c=["track","quick","register","registerPage","registerOnce","trackSignup","trackAbtest","setProfile","setOnceProfile","appendProfile","incrementProfile","deleteProfile","unsetProfile","identify","login","logout","trackLink","clearAllRegister","getAppStatus"],p=0;p<c.length;p++)o[e][c[p]]=o[e].call(null,c[p]);o[e]._t||(i=n.createElement(a),s=n.getElementsByTagName(a)[0],i.async=1,i.src=r,i.setAttribute("charset","UTF-8"),s.parentNode.insertBefore(i,s),o[e].para=t)}catch(t){console.error("神策SDK默认初始化错误",t)}})(function(){var t=e?"default":{A13:"zlbusiness",A23:"zlclient",A24:"zlclient",E11:"zlcrm",E12:"zlcrm"}[n.page.appid]||"default",r={sdk_url:"https://statistic.zhaopin.cn/sdk/sa/1.11.9/sa.min.js",heatmap_url:"https://statistic.zhaopin.cn/sdk/sa/1.11.9/heap_map.min.js",name:a,show_log:!!e,web_url:"https://dsm.zhaopin.cn/?project="+t,server_url:"https://ds.zhaopin.cn/sa?project="+t,heatmap:{custom_property:i},callback_timeout:0,queue_timeout:0};try{void 0!==window.localStorage&&void 0!==window.localStorage.zpfe_stat_sa_show_log&&(r.show_log="true"===window.localStorage.getItem("zpfe_stat_sa_show_log"))}catch(t){}return r}()),window[a].registerPage&&window[a].registerPage(n.page),window[a].quick&&window[a].quick("autoTrack");function s(t){return window.sa&&window.sa[t]}window.zpStat={track:function(t,r,e){s("track")&&window.sa.track(t,r,e)},login:function(t){s("login")&&window.sa.login(t)},logout:function(t){s("logout")&&window.sa.logout(t)},setProfile:function(t,r){s("setProfile")&&window.sa.setProfile(t,r)},error:function(t,r){t&&s("track")&&window.sa.track("zp_ui_error",{zp_ui_error_message:t.message,zp_ui_error_stack:t.stack,zp_ui_error_description:r,current_url_path:c(document.location.href)})}};var c=o.getCurrentUrlPath;!function(){var t=window.XMLHttpRequest;if(t){var i=t.prototype.open;t.prototype.open=function(){for(var t=window.zpPageRequestId,r=arguments.length,e=Array(r),o=0;o<r;o++)e[o]=arguments[o];var n=e[1],a=n;try{t&&(a+=(-1<n.indexOf("?")?"&":"?")+"x-zp-page-request-id="+t),e[1]=a,i.apply(this,e)}catch(t){console.error("执行 XMLHttpRequest open 出错",t),window.zpStat&&window.zpStat.error&&window.zpStat.error(t,"执行 XMLHttpRequest open 出错")}}}}();!function(){function t(t){console.error("发现未捕获的错误",t.error),window.zpStat&&window.zpStat.error&&window.zpStat.error(t.error,"发现未捕获的错误")}window.addEventListener?window.addEventListener("error",t,!1):window.attachEvent("onerror",t)}();return{}}();
